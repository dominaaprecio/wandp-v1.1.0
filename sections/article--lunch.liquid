{% include 'breadcrumbs' %}

<article class="post post--lunch" role="article" itemscope itemtype="http://schema.org/Article">

  <div itemprop="articleBody" id="blog-post" class="post__body">
    <div class="wrap wrap--article">
      <div class="grid grid grid--2x-gutter">
        {% comment %}
        <div class="grid__item medium-up--four-tenths post__images">
          {{ article | img_url: '1200x1500', crop: 'center' | img_tag: article.title }}
        </div>
        {% endcomment %}
        <div class="grid__item medium-up--six-tenths medium-up--push-two-tenths post__text post__text--lunch">
          <div class="post__title">
            <h1>{{ article.title }}</h1>
          </div>
          <p>{{ article | img_url: '1200x' | img_tag: article.title }}</p>
          <div class="lunch-promo">
            <a href="/products/lunch" target="_blank">
              <img src="https://cdn.shopify.com/s/files/1/2788/6486/files/WP_DT_Lunch_square.jpg?v=1591214270" alt="LUNCH! by Olivia Mack McCool">
              <h5>Excerpted from <em>LUNCH!</em><br>by Olivia Mack McCool</h5>
            </a>
          </div>
          {{ article.content }}
        </div>
      </div>
    </div>
  </div>

{% comment %}
  <div itemprop="articleBody" class="post__body">
    <div class="wrap wrap--article">
      <div class="grid grid--full">
        <div class="grid__item one-whole rte">
          {% if article.image %}
          	<div class="left" style="max-width: 60%; margin: 0 30px 30px 0;">
            {{ article | img_url: '1200x1500', 'crop: center' | img_tag: article.title }}
            </div>
          {% endif %}
    	  {{ article.content }}
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
  </div>
{% endcomment %}

  {% comment %}
  {% if article.tags.size > 0 %}
    <ul>
      {% for tag in article.tags %}
        <li>
          <a href="{{ blog.url }}/tagged/{{ tag | handle }}">{{ tag }}</a>{% unless forloop.last %}, {% endunless %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}
  {% endcomment %}

  {% assign shop_the_story = article.metafields.post.shop_the_story | replace: ' ,', ',' | replace: ', ', ',' | split: ',' %}

  {% if shop_the_story.size > 0 %}
  <div class="post__shop">
    {% comment %}
    <div class="wrap wrap--article">
      <h2>Shop the Story</h2>
    </div>
    {% endcomment %}
    <div class="post__shop-slider" id="shop-the-story">
      {% for product_handle in shop_the_story %}
        {% assign product = all_products[product_handle] %}
        <div class="post__shop-slide">
          {% include 'product-grid-item' %}
        </div>
      {% endfor %}
    </div>
  </div>
  <script type="text/javascript">
    $('#shop-the-story').slick({
      centerMode: true,
      slidesToShow: 3,
      slidesToScroll: 3,
      arrows: false,
      dots: true,
      centerPadding: '200px',
      responsive: [
        {
          breakpoint: 768,
          settings: {
            arrows: false,
            centerMode: true,
            centerPadding: '60px',
            slidesToShow: 3,
            slidesToScroll: 3
          }
        },
        {
          breakpoint: 480,
          settings: {
            arrows: false,
            centerMode: true,
            centerPadding: '100px',
            slidesToShow: 1,
            slidesToScroll: 1
          }
        }
      ]
    });
  </script>
  {% endif %}

  {% if settings.social_sharing_blog %}
    <div class="post__social text-center">
      <div class="wrap wrap--article">
        <h3>&mdash; Share &mdash;</h3>
    	{% include 'social-sharing', share_title: article.title, share_permalink: article.url, share_image: article.image %}
      </div>
    </div>
  {% endif %}

  <div class="post__nav text-center">
    <div class="wrap wrap--article">
      <div class="grid grid--uniform">
		{% assign prevArticle = false %}
		{% assign nextArticle = false %}
        {% if blog.previous_article %}{% assign prevArticle = true %}{% endif %}
        {% if blog.next_article %}{% assign nextArticle = true %}{% endif %}

        {% if prevArticle and nextArticle %}

          <div class="grid__item medium-up--one-third">
            <a href="{{ blog.next_article }}">&lt; Previous Article</a>
          </div>

          <div class="grid__item medium-up--one-third text-center">
            <a href="{{ blog.url }}">Back to All Articles</a>
            {% comment %}
            {% if article.tags.size > 0 %}
                {% for tag in article.tags %}
                  {% if forloop.first %}
                    <a href="{{ blog.url }}/tagged/{{ tag | handle }}">Back to All Articles</a>
                  {% endif %}
                {% endfor %}
            {% else %}
              <a href="{{ blog.url }}">Back to All Articles</a>
            {% endif %}
            {% endcomment %}
          </div>

          <div class="grid__item medium-up--one-third text-center">
			<a href="{{ blog.previous_article }}">Next Article &gt;</a>
          </div>

        {% else %}

          <div class="grid__item medium-up--one-half text-center">
            <a href="{{ blog.url }}">Back to All Articles</a>
            {% comment %}
            {% if article.tags.size > 0 %}
                {% for tag in article.tags %}
                  {% if forloop.first %}
                    <a href="{{ blog.url }}/tagged/{{ tag | handle }}">&lt; Back to All Articles</a>
                  {% endif %}
                {% endfor %}
            {% else %}
              <a href="{{ blog.url }}">Back to All Articles</a>
            {% endif %}
            {% endcomment %}
          </div>

          {% if nextArticle %}
            <div class="grid__item medium-up--one-third text-center">
              <a href="{{ blog.next_article }}">&lt; Previous Article</a>
            </div>
          {% endif %}

          {% if prevArticle %}
            <div class="grid__item medium-up--one-half">
              <a href="{{ blog.previous_article }}">Next Article &gt;</a>
            </div>
          {% endif %}

        {% endif %}

      </div>
    </div>
  </div>

</article>

{% schema %}
  {
    "name": "LUNCH! Blog Article",
    "settings": []
  }
{% endschema %}

{% stylesheet %}

{% endstylesheet %}

{% javascript %}
{% endjavascript %}
